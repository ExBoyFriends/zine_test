/* loader.css */

#loader {
  position: fixed;
  inset: 0;
  z-index: 10000;
  background: #000;
  display: flex;
  justify-content: center;
  align-items: center;
  /* 影がはみ出してもスクロールバーを出さない */
  overflow: hidden; 
}

.loader-inner {
  width: 100vw;
  height: 100vh;
  object-fit: cover;
}

/* ローディング用の影の層 */
#fadeLayer {
  position: absolute;
  /* transform時の余白を確保 */
  inset: -100%; 
  z-index: 10001;
  /* 本編と同じく右下から左上へ向かうグラデーション */
  background: radial-gradient(ellipse at 85% 105%, 
    rgba(0, 0, 0, 1.0) 0%, 
    rgba(0, 0, 0, 0.8) 25%, 
    rgba(0, 0, 0, 0.3) 70%, 
    rgba(0, 0, 0, 0) 96%);
  mix-blend-mode: multiply;
  filter: blur(80px);
  /* 2.5秒周期：本編より速い鼓動 */
  animation: fastLooming 2.5s ease-in-out infinite alternate;
  will-change: opacity, transform;
}

@keyframes fastLooming {
  0%   { opacity: 0; transform: scale(1.5); }
  100% { opacity: 1.0; transform: scale(1.0); }
}

/* 終了時演出：闇を巨大化させ、画面全体を真っ黒な「面」にする */
#loader.swallow-darkness #fadeLayer {
  animation: none;
  transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s;
  /* 4倍に拡大し、影の「芯（真っ黒な部分）」で画面を覆い尽くす */
  transform: scale(4.0); 
  opacity: 1;
  background: #000; /* 透過のない純粋な黒へ */
}
