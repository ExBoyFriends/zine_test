
/* loader.css */

#loader {
  position: fixed;
  inset: 0;
  z-index: 10000;
  background: #000;
  display: flex;
  overflow: hidden;
}

/* 本編 background.css の .background と完全に一致させる */
.loader-bg-image {
  position: absolute;
  inset: 0;
  width: 100vw;
  height: 100vh;
  background: url('../../image/background.jpg') center / cover no-repeat;
  z-index: 10000;
  /* GPUアクセラレーションを有効にしてカクつきを防止 */
  transform: translateZ(0);
}

#fadeLayer {
  position: absolute;
  inset: -100%; 
  z-index: 10002;
  background: radial-gradient(ellipse at 85% 105%, 
    rgba(0, 0, 0, 1.0) 0%, 
    rgba(0, 0, 0, 0.8) 25%, 
    rgba(0, 0, 0, 0.3) 70%, 
    rgba(0, 0, 0, 0) 96%);
  mix-blend-mode: multiply;
  filter: blur(80px);
  /* 1.0秒周期：激しい鼓動 */
  animation: fastLooming 1.0s cubic-bezier(0.4, 0, 0.2, 1) infinite alternate;
  will-change: transform, opacity;
}

@keyframes fastLooming {
  0% { 
    opacity: 0; 
    transform: scale(2.2) translateZ(0); 
  }
  100% { 
    opacity: 1.0; 
    transform: scale(1.0) translateZ(0); 
  }
}

/* 終了時：闇を巨大化させ、画面全体を真っ黒な「面」にする */
#loader.swallow-darkness #fadeLayer {
  animation: none;
  /* 1.0秒で一気に巨大化して塗りつぶす */
  transition: transform 1.0s cubic-bezier(0.4, 0, 0.2, 1);
  transform: scale(5.0) translate(0, 0) translateZ(0); 
  opacity: 1;
}

/* 最後のひと押し：影レイヤーの背後から画面を黒く塗りつぶす */
#loader.swallow-darkness::after {
  content: "";
  position: absolute;
  inset: -20%;
  /* inset: 0 ではなく、少し外側まで広げておく */
  top: -10%;
  left: -10%;
  width: 120%;
  height: 120%;
  background: #000;
  z-index: 10001;
  opacity: 0;
  pointer-events: none;
  animation: finalBlackout 1.0s forwards;
}

@keyframes finalBlackout {
  0%   { opacity: 0; }
  100% { opacity: 1; }
}

/* JSで制御する「夜明け」のフェード時間を 2.5s に設定 */
#loader.swallow-darkness {
  /* ここでゆっくりとフェードアウトさせる */
  transition: opacity 2.5s ease-in-out;
}
