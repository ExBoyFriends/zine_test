<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Siren Carousel</title>

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  /*background:#000;*/
}

/* 背景 */
.bg-normal{
  position:fixed;
  inset:0;
  background:url("image/background.jpg") center/cover no-repeat;
  z-index:-2;
}

.bg-siren{
  position:fixed;
  inset:0;
  background:url("image/background.jpg") center/cover no-repeat;
  z-index:-1;
  animation:siren 1.8s ease-in-out infinite;
}

@keyframes siren{
  0%{opacity:1;}
  50%{opacity:0.25;}
  100%{opacity:1;}
}

/* カルーセル */
.carousel{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
}

.page{
  position:absolute;
  opacity:0;
  transition:opacity 4s ease;
  pointer-events:none;
}

.page.active{
  opacity:1;
  pointer-events:auto;
}

.page.first{
  transition:opacity 6s ease;
}

.carousel-inner{
  display:flex;          /* ← これが無いと縦になる */
  gap:16px;
}

.carousel-inner img{
  width:40vw;
  max-width:400px;
  height:auto;
  display:block;
}

/* ドット */
.dots{
  position:absolute;
  bottom:24px;
  width:100%;
  text-align:center;
  opacity:0;
  transition:opacity 2s ease;
}

.dots.show{opacity:1;}

.dot{
  width:10px;
  height:10px;
  background:#555;
  display:inline-block;
  margin:0 6px;
}

.dot.active{background:#fff;}
</style>
</head>

<body>

<div class="bg-normal"></div>
<div class="bg-siren"></div>

<div class="carousel">
  <div class="page active first">
    <div class="carousel-inner">
      <img src="image/a.png">
      <img src="image/b.png">
    </div>
  </div>

  <div class="page">
    <div class="carousel-inner">
      <img src="image/c.png">
      <img src="image/d.png">
    </div>
  </div>

  <div class="dots">
    <span class="dot active"></span>
    <span class="dot"></span>
  </div>
</div>

<script>
const siren = document.querySelector(".bg-siren");
const pages = document.querySelectorAll(".page");
const dots = document.querySelectorAll(".dot");
const dotsWrap = document.querySelector(".dots");

let index = 0;
let locked = true;

/* 初期：全部消す */
pages.forEach(p=>p.style.opacity=0);

/* シーケンス */
window.onload = () => {

  // サイレン 3.5秒
  setTimeout(()=>{
    siren.style.transition="opacity 1.2s ease";
    siren.style.opacity=0;          // 暗くなるだけ

    // 初回フェード
    pages[0].classList.add("active");
    pages[0].style.opacity=1;

    setTimeout(()=>{
      pages[0].classList.remove("first");
      dotsWrap.classList.add("show");
      locked = false;
    },6000);

  },3500);
};

/* ページ送り（確認用：画面タップ） */
document.body.addEventListener("click",()=>{
  if(locked) return;

  pages[index].classList.remove("active");
  dots[index].classList.remove("active");

  index = (index+1)%pages.length;

  pages[index].classList.add("active");
  dots[index].classList.add("active");
});
</script>

</body>
</html>